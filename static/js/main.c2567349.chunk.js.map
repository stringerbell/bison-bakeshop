{"version":3,"sources":["img/rolls.jpg","RenderIf.js","OutOfStock.js","Checkout.js","logo.svg","Preorder.js","Success.js","Login.js","LoginRequest.js","Logout.js","App.js","reportWebVitals.js","index.js"],"names":["RenderIf","props","condition","children","fallback","OutOfStock","date","fetchCheckoutSession","a","quantity","id","fetch","method","headers","body","JSON","stringify","then","res","json","formatPrice","amount","discountAmount","currency","numberFormat","Intl","NumberFormat","style","currencyDisplay","parts","formatToParts","zeroDecimalCurrency","type","total","format","toFixed","reducer","state","action","payload","price","unitAmount","loading","error","Error","Checkout","selected","available","useReducer","stripe","dispatch","useEffect","publicKey","loadStripe","fetchConfig","handleClick","event","Date","toISOString","undefined","sessionId","window","location","reload","redirectToCheckout","className","alt","src","rolls","width","disabled","onClick","min","max","value","readOnly","Math","role","message","PreOrder","useState","setID","modalIsOpen","setIsOpen","setSelected","dates","fetchPreSales","r","response","fetchID","qty","closeModal","Modal","setAppElement","logged_in","to","logo","map","e","isOpen","onRequestClose","contentLabel","Success","success","form","setForm","email","setEmail","sessionID","useLocation","search","replace","customer_email","fetchSession","createAccount","ok","status","ms","Promise","resolve","setTimeout","href","catch","onChange","target","Login","complete","setComplete","j","onSubmit","preventDefault","required","placeholder","LoginRequest","token","useParams","setLocation","loginRequest","Logout","logout","App","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c2567349.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/rolls.35d1b099.jpg\";","export default function RenderIf(props) {\n  if (props.condition) {\n    return props.children;\n  }\n  return props.fallback;\n}\n","import React from \"react\";\n\nexport default function OutOfStock({ date }) {\n  return <>We're out of stock.</>;\n}\n","import React, { useEffect, useReducer } from \"react\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport rolls from \"./img/rolls.jpg\";\nimport RenderIf from \"./RenderIf\";\nimport OutOfStock from \"./OutOfStock\";\n\nconst fetchCheckoutSession = async ({ quantity, date, id }) => {\n  return fetch(\"/api/create-checkout-session\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      quantity,\n      id,\n      date,\n    }),\n  }).then((res) => res.json());\n};\n\nconst formatPrice = ({ amount, discountAmount, currency, quantity }) => {\n  const numberFormat = new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency,\n    currencyDisplay: \"symbol\",\n  });\n  const parts = numberFormat.formatToParts(amount);\n  let zeroDecimalCurrency = true;\n  for (let part of parts) {\n    if (part.type === \"decimal\") {\n      zeroDecimalCurrency = false;\n    }\n  }\n  amount = zeroDecimalCurrency ? amount : amount / 100;\n  discountAmount = zeroDecimalCurrency ? discountAmount : discountAmount / 100;\n  let total = amount * quantity;\n  if (quantity > 3) {\n    total = quantity * discountAmount;\n  }\n\n  return numberFormat.format(total.toFixed(2));\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"useEffectUpdate\":\n      return {\n        ...state,\n        ...action.payload,\n        price: formatPrice({\n          amount: action.payload.unitAmount,\n          discountAmount: action.payload.discountAmount,\n          currency: action.payload.currency,\n          quantity: state.quantity,\n        }),\n      };\n    case \"increment\":\n      return {\n        ...state,\n        quantity: state.quantity + 1,\n        price: formatPrice({\n          amount: state.unitAmount,\n          discountAmount: state.discountAmount,\n          currency: state.currency,\n          quantity: state.quantity + 1,\n        }),\n      };\n    case \"decrement\":\n      return {\n        ...state,\n        quantity: state.quantity - 1,\n        price: formatPrice({\n          amount: state.unitAmount,\n          discountAmount: state.discountAmount,\n          currency: state.currency,\n          quantity: state.quantity - 1,\n        }),\n      };\n    case \"setLoading\":\n      return { ...state, loading: action.payload.loading };\n    case \"setError\":\n      return { ...state, error: action.payload.error };\n    default:\n      throw new Error();\n  }\n}\n\nconst Checkout = ({ selected: { date, available, id } }) => {\n  const [state, dispatch] = useReducer(reducer, {\n    quantity: 1,\n    price: null,\n    discountAmount: null,\n    loading: false,\n    error: null,\n    stripe: null,\n  });\n\n  useEffect(() => {\n    async function fetchConfig() {\n      // Fetch config from our backend.\n      const { publicKey, unitAmount, discountAmount, currency } = await fetch(\n        \"/api/config\"\n      ).then((res) => res.json());\n      // Make sure to call `loadStripe` outside of a component’s render to avoid\n      // recreating the `Stripe` object on every render.\n      dispatch({\n        type: \"useEffectUpdate\",\n        payload: {\n          unitAmount,\n          discountAmount,\n          currency,\n          stripe: await loadStripe(publicKey),\n        },\n      });\n    }\n\n    fetchConfig();\n  }, []);\n\n  const handleClick = async (event) => {\n    // Call your backend to create the Checkout session.\n    dispatch({ type: \"setLoading\", payload: { loading: true } });\n    const { sessionId } = await fetchCheckoutSession({\n      quantity: state.quantity,\n      id,\n      date: new Date(date).toISOString(),\n    });\n    if (sessionId === undefined) {\n      // TODO make this clearer. This means they are logged in\n      dispatch({ type: \"setLoading\", payload: { loading: false } });\n      window.location.reload();\n      return\n    }\n    // When the customer clicks on the button, redirect them to Checkout.\n    const { error } = await state.stripe.redirectToCheckout({\n      sessionId,\n    });\n    // If `redirectToCheckout` fails due to a browser or network\n    // error, display the localized error message to your customer\n    // using `error.message`.\n    if (error) {\n      dispatch({ type: \"setError\", payload: { error } });\n      dispatch({ type: \"setLoading\", payload: { loading: false } });\n    }\n  };\n\n  return (\n    <RenderIf condition={available !== 0} fallback={<OutOfStock />}>\n      <div className=\"sr-root\">\n        <div className=\"sr-main\">\n          <section className=\"container\">\n            <div>\n              <h1>Cinnamon Roll</h1>\n              <h4>Pre-order a cinnamon roll for {date}</h4>\n              <div className=\"pasha-image\">\n                <img alt=\"Cinnamon Rolls\" src={rolls} width=\"100%\" />\n              </div>\n            </div>\n            <div className=\"quantity-setter\">\n              <button\n                className=\"increment-btn\"\n                disabled={state.quantity === 1}\n                onClick={() => dispatch({ type: \"decrement\" })}\n              >\n                -\n              </button>\n              <input\n                type=\"number\"\n                id=\"quantity-input\"\n                min=\"1\"\n                max={available}\n                value={state.quantity}\n                readOnly\n              />\n              <button\n                className=\"increment-btn\"\n                disabled={state.quantity === Math.min(available, 12)}\n                onClick={() => dispatch({ type: \"increment\" })}\n              >\n                +\n              </button>\n            </div>\n            <p className=\"sr-legal-text\">\n              Number of rolls (max {Math.min(available, 12)})\n            </p>\n\n            <p className={\"price\"}>{`${state.price || \"\"}`}</p>\n            <p className={\"\"}>\n              I'll need a credit card to confirm your order. It won't be charged\n              until pickup.\n            </p>\n\n            <button\n              role=\"link\"\n              disabled={!state.stripe || state.loading}\n              onClick={handleClick}\n            >\n              {state.loading || !state.price\n                ? `Loading...`\n                : `Reserve my rolls`}\n            </button>\n\n            <div className=\"sr-field-error\">{state.error?.message}</div>\n          </section>\n        </div>\n      </div>\n    </RenderIf>\n  );\n};\n\nexport default Checkout;\n","export default __webpack_public_path__ + \"static/media/logo.62cb149e.svg\";","import React, { useEffect, useReducer, useState } from \"react\";\nimport Modal from \"react-modal\";\nimport Checkout from \"./Checkout\";\nimport \"./css/preorder.css\";\nimport \"./App.css\";\nimport { Link } from \"react-router-dom\";\nimport logo from \"./logo.svg\";\nimport RenderIf from \"./RenderIf\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"useEffectUpdate\":\n      return action.payload;\n    default:\n      return [];\n  }\n}\n\nexport default function PreOrder() {\n  const [id, setID] = useState({});\n  const [modalIsOpen, setIsOpen] = useState(false);\n  const [selected, setSelected] = useState({});\n  const [dates, dispatch] = useReducer(reducer, []);\n\n  useEffect(() => {\n    async function fetchPreSales() {\n      // Fetch dates/availability from our backend.\n      const dates = await fetch(\"/api/pre-sales\").then((res) => res.json());\n      dispatch({\n        type: \"useEffectUpdate\",\n        payload: dates,\n      });\n    }\n\n    fetchPreSales();\n  }, []);\n\n  useEffect(() => {\n    async function fetchID() {\n      const response = await fetch(\"/api/me\").then((r) => r.json());\n      setID(response);\n    }\n    fetchID();\n  }, []);\n\n  const qty = (available) => {\n    if (available === 0) {\n      return \"Sold Out!\";\n    }\n    if (available <= 6) {\n      return `Only ${available} left!`;\n    }\n    return `${available} available`;\n  };\n\n  const onClick = (event, { date, id, available }) => {\n    setSelected({ date, available, id });\n    setIsOpen(true);\n  };\n  const closeModal = () => {\n    setSelected({});\n    setIsOpen(false);\n  };\n  Modal.setAppElement(\"#root\");\n\n  return (\n    <>\n      <RenderIf\n        condition={!id.logged_in}\n        fallback={\n          <Link className={\"login-link\"} to={\"/logout\"}>\n            <button>Logout</button>\n          </Link>\n        }\n      >\n        <Link className={\"login-link\"} to={\"/login\"}>\n          <button>Login</button>\n        </Link>\n      </RenderIf>\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n      </header>\n      <div className={\"pre-order-container\"}>\n        <p className={\"p\"}>Pre-order cinnamon rolls:</p>\n        <ul className={\"pre-order-list\"}>\n          {dates.map(({ available, date, id }) => (\n            <div key={id}>\n              <button\n                disabled={available <= 0}\n                onClick={(e) => onClick(e, { date, id, available })}\n                className={\"pre-order-date\"}\n              >\n                {date}\n              </button>\n              <span className={\"qty\"}>{qty(available)}</span>\n            </div>\n          ))}\n        </ul>\n        <Modal\n          isOpen={modalIsOpen}\n          onRequestClose={closeModal}\n          contentLabel=\"Pre-Order A Roll\"\n        >\n          <div onClick={closeModal} className={\"close-modal-btn\"}>\n            ✖\n          </div>\n          <Checkout selected={selected} />\n        </Modal>\n      </div>\n    </>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport \"./App.css\";\nimport RenderIf from \"./RenderIf\";\nimport logo from \"./logo.svg\";\nimport \"./css/success.css\";\n\nconst sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\n\nexport default function Success() {\n  const [form, setForm] = useState({\n    error: \"\",\n    success: \"\",\n    loading: false,\n  });\n  const [email, setEmail] = useState(\"\");\n  const location = useLocation();\n  const sessionID = location.search.replace(\"?s=\", \"\");\n  useEffect(() => {\n    async function fetchSession() {\n      const res = await fetch(\n        \"/checkout-session?sessionId=\" + sessionID\n      ).then((res) => res.json());\n      // setSession(res);\n      setEmail(res.customer_email);\n    }\n\n    fetchSession();\n  }, [sessionID]);\n\n  const createAccount = async () => {\n    setForm({ ...form, loading: true });\n    await fetch(\"/api/account\", {\n      method: \"POST\",\n      body: JSON.stringify({ sessionId: sessionID, email }),\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        throw new Error(res.status);\n      })\n      .then((json) => {\n        setForm({\n          ...form,\n          error: \"\",\n          success: \"All set! Thank you!\",\n        });\n      })\n      .then(() => sleep(3000))\n      .then(() => (window.location.href = \"/\"))\n      .catch((e) => {\n        switch (e.message) {\n          case \"409\":\n            setForm({\n              ...form,\n              success: \"\",\n              error: \"You already have an account with us.\",\n            });\n            break;\n          case \"400\":\n            setForm({\n              ...form,\n              success: \"\",\n              error: \"stop trying to hack me, plz\",\n            });\n            break;\n          default:\n            setForm({ ...form, success: \"\", error: \"something went wrong 😭\" });\n            break;\n        }\n      });\n  };\n  return (\n    <div className={\"success-wrapper-outer\"}>\n      <Link to={'/'}><img src={logo} className=\"App-logo\" alt=\"logo\" /></Link>\n\n      <p>Thank you for your order!</p>\n      <p>Check your email for pickup instructions.</p>\n      <div className={\"success-wrapper\"}>\n        <div className={\"md-vw success-wrapper-inner\"}>\n          <p>Create an account for faster reservations in the future?</p>\n          <input\n            className={\"md-vw\"}\n            disabled={form.success}\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n          <RenderIf condition={form.error} fallback={null}>\n            <h1 className={\"md-vw\"}>{form.error}</h1>\n            <Link to={`/login?email=${email}`}>\n              <button>Login</button>\n            </Link>\n          </RenderIf>\n          <RenderIf condition={form.success} fallback={null}>\n            <h1 className={\"md-vw\"}>{form.success}</h1>\n          </RenderIf>\n          <button\n            className={\"button md-vw\"}\n            disabled={form.loading || form.success}\n            onClick={createAccount}\n          >\n            Create Account\n          </button>\n        </div>\n      </div>\n      {/*</header>*/}\n    </div>\n  );\n}\n","import \"./css/login.css\";\nimport { useEffect, useState } from \"react\";\nimport RenderIf from \"./RenderIf\";\nimport {Link, useLocation} from \"react-router-dom\";\nimport logo from \"./logo.svg\";\n\nexport default function Login() {\n  let {search} = useLocation();\n  const [email, setEmail] = useState(search.replace(\"?email=\", \"\"));\n  const [complete, setComplete] = useState(false);\n  useEffect(() => {\n    fetch(\"/api/me\")\n      .then((r) => r.json())\n      .then((j) => {\n        if (j.logged_in) {\n          window.location.href = \"/\";\n        }\n      });\n  }, []);\n  const onClick = (e) => {\n    e.preventDefault();\n    fetch(\"/api/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ email }),\n    })\n      .then((res) => res.json())\n      .then((j) => setComplete(true));\n  };\n  return (\n    <div className={\"login-wrapper\"}>\n      <Link to={'/'}><img src={logo} className=\"App-logo\" alt=\"logo\" /></Link>\n      <RenderIf\n        condition={!complete}\n        fallback={<h1>Check your email, and click the link to login.</h1>}\n      >\n        <h1>Login with your email</h1>\n        <div className={\"login-inner-wrapper\"}>\n          <form onSubmit={onClick}>\n            <input\n              type={\"email\"}\n              required={true}\n              placeholder={\"email\"}\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            <button type={\"sumbit\"}>Login</button>\n          </form>\n        </div>\n      </RenderIf>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\n\nexport default function LoginRequest() {\n  let { token } = useParams();\n  const [location, setLocation] = useState(null);\n  useEffect(() => {\n    async function loginRequest() {\n      await fetch(\"/api/session\", {\n        method: \"POST\",\n        body: JSON.stringify({ token }),\n      })\n        .then((res) => res.json())\n        .then((j) => {\n          setLocation(j.location);\n        });\n    }\n\n    if (token !== undefined) {\n      loginRequest();\n    }\n  }, []);\n  return location && <Redirect to={location} />;\n}\n","import React, {useEffect} from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { useState } from \"react\";\n\nexport default function Logout() {\n  const [complete, setComplete] = useState(false);\n  useEffect(() => {\n    async function logout() {\n      // Fetch config from our backend.\n      await fetch(\"/api/logout\")\n        .then((res) => res.json())\n        .then(() => setComplete(true));\n    }\n\n    logout();\n  }, []);\n\n  return complete && <Redirect to={\"/\"} />;\n}\n","import React from \"react\";\nimport PreOrder from \"./Preorder\";\nimport { BrowserRouter as Router, Link, Route, Switch } from \"react-router-dom\";\nimport Success from \"./Success\";\nimport Login from \"./Login\";\nimport LoginRequest from \"./LoginRequest\";\nimport Logout from \"./Logout\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router>\n        <Switch>\n          <Route exact path=\"/\">\n            <PreOrder />\n          </Route>\n          <Route exact path={\"/login/:token\"}>\n            <LoginRequest />\n          </Route>\n          <Route exact path={\"/login\"}>\n            <Login />\n          </Route>\n          <Route exact path={\"/logout\"}>\n            <Logout />\n          </Route>\n          <Route exact path=\"/success\">\n            <Success />\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"./css/normalize.css\";\nimport \"./css/global.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}